import alpacaDrip as ad
import datetime
import dbConnector as db


if __name__ == "__main__":

    #start this strategy at 9:35 AM
    if datetime.datetime.now().time() > datetime.time(9,35):
        # Connect to the database
        connector = db.dbConnector()
        connection = connector.createConnection()

        #create time window (5min intervals)
        now = datetime.datetime.now()
        window = datetime.datetime.now() - datetime.timedelta(minutes=5)
        workingSet = connector.getBarsByTimeWindow(connection, window, now)
        strategy = ad.Strategy()
        workingSet = [{'id': 63507, 'symbol': 'AMRN', 'high': 7.475, 'low': 7.475, 'OPEN': 7.475, 'close': 7.475, 'volume': 100, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 7), 'barType': 'barType'}, {'id': 63534, 'symbol': 'AMRN', 'high': 7.465, 'low': 7.46, 'OPEN': 7.465, 'close': 7.46, 'volume': 300, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 10), 'barType': 'barType'}, {'id': 63561, 'symbol': 'AMRN', 'high': 7.48, 'low': 7.465, 'OPEN': 7.47, 'close': 7.47, 'volume': 1774, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 7), 'barType': 'barType'}, {'id': 63588, 'symbol': 'AMRN', 'high': 7.465, 'low': 7.465, 'OPEN': 7.465, 'close': 7.465, 'volume': 100, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 7), 'barType': 'barType'}, {'id': 63615, 'symbol': 'AMRN', 'high': 7.47, 'low': 7.465, 'OPEN': 7.47, 'close': 7.47, 'volume': 700, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 7), 'barType': 'barType'}, {'id': 63508, 'symbol': 'BIOC', 'high': 0.585, 'low': 0.585, 'OPEN': 0.585, 'close': 0.585, 'volume': 500, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 7), 'barType': 'barType'}, {'id': 63535, 'symbol': 'BIOC', 'high': 0.585, 'low': 0.585, 'OPEN': 0.585, 'close': 0.585, 'volume': 1300, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 10), 'barType': 'barType'}, {'id': 63562, 'symbol': 'BIOC', 'high': 0.585, 'low': 0.585, 'OPEN': 0.585, 'close': 0.585, 'volume': 1300, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 7), 'barType': 'barType'}, {'id': 63589, 'symbol': 'BIOC', 'high': 0.585, 'low': 0.585, 'OPEN': 0.585, 'close': 0.585, 'volume': 1300, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 8), 'barType': 'barType'}, {'id': 63616, 'symbol': 'BIOC', 'high': 0.5799, 'low': 0.5799, 'OPEN': 0.5799, 'close': 0.5799, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 7), 'barType': 'barType'}, {'id': 63516, 'symbol': 'BORR', 'high': 2.075, 'low': 2.065, 'OPEN': 2.075, 'close': 2.065, 'volume': 1600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 10), 'barType': 'barType'}, {'id': 63543, 'symbol': 'BORR', 'high': 2.065, 'low': 2.065, 'OPEN': 2.065, 'close': 2.065, 'volume': 400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 13), 'barType': 'barType'}, {'id': 63570, 'symbol': 'BORR', 'high': 2.075, 'low': 2.06, 'OPEN': 2.075, 'close': 2.06, 'volume': 300, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 11), 'barType': 'barType'}, {'id': 63597, 'symbol': 'BORR', 'high': 2.075, 'low': 2.075, 'OPEN': 2.075, 'close': 2.075, 'volume': 500, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 11), 'barType': 'barType'}, {'id': 63624, 'symbol': 'BORR', 'high': 2.075, 'low': 2.075, 'OPEN': 2.075, 'close': 2.075, 'volume': 300, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 10), 'barType': 'barType'}, {'id': 63509, 'symbol': 'CDEV', 'high': 2.03, 'low': 2.03, 'OPEN': 2.03, 'close': 2.03, 'volume': 1000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 8), 'barType': 'barType'}, {'id': 63536, 'symbol': 'CDEV', 'high': 2.04, 'low': 2.03, 'OPEN': 2.03, 'close': 2.035, 'volume': 3481, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 10), 'barType': 'barType'}, {'id': 63563, 'symbol': 'CDEV', 'high': 2.035, 'low': 2.02, 'OPEN': 2.035, 'close': 2.02, 'volume': 9032, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 8), 'barType': 'barType'}, {'id': 63590, 'symbol': 'CDEV', 'high': 2.03, 'low': 2.02, 'OPEN': 2.02, 'close': 2.03, 'volume': 2148, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 8), 'barType': 'barType'}, {'id': 63617, 'symbol': 'CDEV', 'high': 2.03, 'low': 2.025, 'OPEN': 2.03, 'close': 2.03, 'volume': 1101, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 8), 'barType': 'barType'}, {'id': 63505, 'symbol': 'CHFS', 'high': 0.4962, 'low': 0.49, 'OPEN': 0.4962, 'close': 0.49, 'volume': 18400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 6), 'barType': 'barType'}, {'id': 63532, 'symbol': 'CHFS', 'high': 0.4962, 'low': 0.49, 'OPEN': 0.4962, 'close': 0.49, 'volume': 18400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 9), 'barType': 'barType'}, {'id': 63559, 'symbol': 'CHFS', 'high': 0.4962, 'low': 0.49, 'OPEN': 0.4962, 'close': 0.49, 'volume': 18400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 6), 'barType': 'barType'}, {'id': 63586, 'symbol': 'CHFS', 'high': 0.4962, 'low': 0.49, 'OPEN': 0.4962, 'close': 0.49, 'volume': 18400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 7), 'barType': 'barType'}, {'id': 63613, 'symbol': 'CHFS', 'high': 0.4962, 'low': 0.49, 'OPEN': 0.4962, 'close': 0.49, 'volume': 18400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 6), 'barType': 'barType'}, {'id': 63493, 'symbol': 'CIDM', 'high': 2.78, 'low': 2.78, 'OPEN': 2.78, 'close': 2.78, 'volume': 1194, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 40, 16), 'barType': 'barType'}, {'id': 63520, 'symbol': 'CIDM', 'high': 2.78, 'low': 2.78, 'OPEN': 2.78, 'close': 2.78, 'volume': 1194, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 12), 'barType': 'barType'}, {'id': 63547, 'symbol': 'CIDM', 'high': 2.78, 'low': 2.78, 'OPEN': 2.78, 'close': 2.78, 'volume': 1194, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 15), 'barType': 'barType'}, {'id': 63574, 'symbol': 'CIDM', 'high': 2.78, 'low': 2.78, 'OPEN': 2.78, 'close': 2.78, 'volume': 1194, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 13), 'barType': 'barType'}, {'id': 63601, 'symbol': 'CIDM', 'high': 2.79, 'low': 2.79, 'OPEN': 2.79, 'close': 2.79, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 13), 'barType': 'barType'}, {'id': 63628, 'symbol': 'CIDM', 'high': 2.79, 'low': 2.79, 'OPEN': 2.79, 'close': 2.79, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 12), 'barType': 'barType'}, {'id': 63510, 'symbol': 'CVI', 'high': 24.91, 'low': 24.91, 'OPEN': 24.91, 'close': 24.91, 'volume': 101, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 8), 'barType': 'barType'}, {'id': 63537, 'symbol': 'CVI', 'high': 25.0, 'low': 25.0, 'OPEN': 25.0, 'close': 25.0, 'volume': 121, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 11), 'barType': 'barType'}, {'id': 63564, 'symbol': 'CVI', 'high': 24.99, 'low': 24.99, 'OPEN': 24.99, 'close': 24.99, 'volume': 100, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 8), 'barType': 'barType'}, {'id': 63591, 'symbol': 'CVI', 'high': 24.99, 'low': 24.99, 'OPEN': 24.99, 'close': 24.99, 'volume': 100, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 8), 'barType': 'barType'}, {'id': 63618, 'symbol': 'CVI', 'high': 24.99, 'low': 24.99, 'OPEN': 24.99, 'close': 24.99, 'volume': 100, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 8), 'barType': 'barType'}, {'id': 63496, 'symbol': 'DGLY', 'high': 4.37, 'low': 4.33, 'OPEN': 4.33, 'close': 4.37, 'volume': 662, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 3), 'barType': 'barType'}, {'id': 63523, 'symbol': 'DGLY', 'high': 4.35, 'low': 4.35, 'OPEN': 4.35, 'close': 4.35, 'volume': 288, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 6), 'barType': 'barType'}, {'id': 63550, 'symbol': 'DGLY', 'high': 4.35, 'low': 4.35, 'OPEN': 4.35, 'close': 4.35, 'volume': 288, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 3), 'barType': 'barType'}, {'id': 63577, 'symbol': 'DGLY', 'high': 4.32, 'low': 4.3, 'OPEN': 4.3, 'close': 4.31, 'volume': 1260, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 4), 'barType': 'barType'}, {'id': 63604, 'symbol': 'DGLY', 'high': 4.26, 'low': 4.25, 'OPEN': 4.26, 'close': 4.25, 'volume': 6812, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 4), 'barType': 'barType'}, {'id': 63494, 'symbol': 'EOG', 'high': 60.935, 'low': 60.935, 'OPEN': 60.935, 'close': 60.935, 'volume': 400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 40, 18), 'barType': 'barType'}, {'id': 63521, 'symbol': 'EOG', 'high': 60.92, 'low': 60.92, 'OPEN': 60.92, 'close': 60.92, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 14), 'barType': 'barType'}, {'id': 63548, 'symbol': 'EOG', 'high': 60.95, 'low': 60.95, 'OPEN': 60.95, 'close': 60.95, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 17), 'barType': 'barType'}, {'id': 63575, 'symbol': 'EOG', 'high': 60.92, 'low': 60.92, 'OPEN': 60.92, 'close': 60.92, 'volume': 1200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 15), 'barType': 'barType'}, {'id': 63602, 'symbol': 'EOG', 'high': 60.92, 'low': 60.92, 'OPEN': 60.92, 'close': 60.92, 'volume': 1200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 15), 'barType': 'barType'}, {'id': 63629, 'symbol': 'EOG', 'high': 60.89, 'low': 60.84, 'OPEN': 60.84, 'close': 60.89, 'volume': 600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 14), 'barType': 'barType'}, {'id': 63492, 'symbol': 'EVFM', 'high': 3.495, 'low': 3.495, 'OPEN': 3.495, 'close': 3.495, 'volume': 800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 40, 16), 'barType': 'barType'}, {'id': 63519, 'symbol': 'EVFM', 'high': 3.495, 'low': 3.495, 'OPEN': 3.495, 'close': 3.495, 'volume': 400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 12), 'barType': 'barType'}, {'id': 63546, 'symbol': 'EVFM', 'high': 3.5, 'low': 3.495, 'OPEN': 3.495, 'close': 3.495, 'volume': 1000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 15), 'barType': 'barType'}, {'id': 63573, 'symbol': 'EVFM', 'high': 3.5, 'low': 3.495, 'OPEN': 3.5, 'close': 3.495, 'volume': 4200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 13), 'barType': 'barType'}, {'id': 63600, 'symbol': 'EVFM', 'high': 3.495, 'low': 3.495, 'OPEN': 3.495, 'close': 3.495, 'volume': 516, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 12), 'barType': 'barType'}, {'id': 63627, 'symbol': 'EVFM', 'high': 3.495, 'low': 3.495, 'OPEN': 3.495, 'close': 3.495, 'volume': 600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 12), 'barType': 'barType'}, {'id': 63499, 'symbol': 'GNUS', 'high': 4.935, 'low': 4.92, 'OPEN': 4.935, 'close': 4.92, 'volume': 1600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 4), 'barType': 'barType'}, {'id': 63526, 'symbol': 'GNUS', 'high': 5.05, 'low': 5.05, 'OPEN': 5.05, 'close': 5.05, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 6), 'barType': 'barType'}, {'id': 63553, 'symbol': 'GNUS', 'high': 5.05, 'low': 5.05, 'OPEN': 5.05, 'close': 5.05, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 4), 'barType': 'barType'}, {'id': 63580, 'symbol': 'GNUS', 'high': 5.005, 'low': 5.005, 'OPEN': 5.005, 'close': 5.005, 'volume': 1378, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 5), 'barType': 'barType'}, {'id': 63607, 'symbol': 'GNUS', 'high': 5.005, 'low': 5.005, 'OPEN': 5.005, 'close': 5.005, 'volume': 1378, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 4), 'barType': 'barType'}, {'id': 63495, 'symbol': 'INUV', 'high': 0.611, 'low': 0.61, 'OPEN': 0.611, 'close': 0.61, 'volume': 7929, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 40, 19), 'barType': 'barType'}, {'id': 63522, 'symbol': 'INUV', 'high': 0.611, 'low': 0.61, 'OPEN': 0.611, 'close': 0.61, 'volume': 7929, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 15), 'barType': 'barType'}, {'id': 63549, 'symbol': 'INUV', 'high': 0.611, 'low': 0.61, 'OPEN': 0.611, 'close': 0.61, 'volume': 7929, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 18), 'barType': 'barType'}, {'id': 63576, 'symbol': 'INUV', 'high': 0.611, 'low': 0.61, 'OPEN': 0.611, 'close': 0.61, 'volume': 7929, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 15), 'barType': 'barType'}, {'id': 63603, 'symbol': 'INUV', 'high': 0.611, 'low': 0.61, 'OPEN': 0.611, 'close': 0.61, 'volume': 7929, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 15), 'barType': 'barType'}, {'id': 63630, 'symbol': 'INUV', 'high': 0.611, 'low': 0.61, 'OPEN': 0.611, 'close': 0.61, 'volume': 7929, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 15), 'barType': 'barType'}, {'id': 63497, 'symbol': 'NOG', 'high': 1.245, 'low': 1.24, 'OPEN': 1.24, 'close': 1.24, 'volume': 1402, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 4), 'barType': 'barType'}, {'id': 63524, 'symbol': 'NOG', 'high': 1.24, 'low': 1.24, 'OPEN': 1.24, 'close': 1.24, 'volume': 400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 6), 'barType': 'barType'}, {'id': 63551, 'symbol': 'NOG', 'high': 1.24, 'low': 1.24, 'OPEN': 1.24, 'close': 1.24, 'volume': 400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 4), 'barType': 'barType'}, {'id': 63578, 'symbol': 'NOG', 'high': 1.25, 'low': 1.245, 'OPEN': 1.25, 'close': 1.25, 'volume': 6102, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 4), 'barType': 'barType'}, {'id': 63605, 'symbol': 'NOG', 'high': 1.25, 'low': 1.25, 'OPEN': 1.25, 'close': 1.25, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 4), 'barType': 'barType'}, {'id': 63513, 'symbol': 'NOK', 'high': 4.52, 'low': 4.52, 'OPEN': 4.52, 'close': 4.52, 'volume': 100, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 9), 'barType': 'barType'}, {'id': 63540, 'symbol': 'NOK', 'high': 4.52, 'low': 4.52, 'OPEN': 4.52, 'close': 4.52, 'volume': 487, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 12), 'barType': 'barType'}, {'id': 63567, 'symbol': 'NOK', 'high': 4.52, 'low': 4.52, 'OPEN': 4.52, 'close': 4.52, 'volume': 201, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 10), 'barType': 'barType'}, {'id': 63594, 'symbol': 'NOK', 'high': 4.52, 'low': 4.52, 'OPEN': 4.52, 'close': 4.52, 'volume': 713, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 10), 'barType': 'barType'}, {'id': 63621, 'symbol': 'NOK', 'high': 4.525, 'low': 4.525, 'OPEN': 4.525, 'close': 4.525, 'volume': 301, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 9), 'barType': 'barType'}, {'id': 63503, 'symbol': 'NRGU', 'high': 7.665, 'low': 7.665, 'OPEN': 7.665, 'close': 7.665, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 5), 'barType': 'barType'}, {'id': 63530, 'symbol': 'NRGU', 'high': 7.665, 'low': 7.665, 'OPEN': 7.665, 'close': 7.665, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 8), 'barType': 'barType'}, {'id': 63557, 'symbol': 'NRGU', 'high': 7.665, 'low': 7.665, 'OPEN': 7.665, 'close': 7.665, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 5), 'barType': 'barType'}, {'id': 63584, 'symbol': 'NRGU', 'high': 7.755, 'low': 7.755, 'OPEN': 7.755, 'close': 7.755, 'volume': 800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 6), 'barType': 'barType'}, {'id': 63611, 'symbol': 'NRGU', 'high': 7.755, 'low': 7.755, 'OPEN': 7.755, 'close': 7.755, 'volume': 800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 5), 'barType': 'barType'}, {'id': 63502, 'symbol': 'OAS', 'high': 1.96, 'low': 1.94, 'OPEN': 1.94, 'close': 1.96, 'volume': 4202, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 5), 'barType': 'barType'}, {'id': 63529, 'symbol': 'OAS', 'high': 1.955, 'low': 1.94, 'OPEN': 1.95, 'close': 1.94, 'volume': 12820, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 7), 'barType': 'barType'}, {'id': 63556, 'symbol': 'OAS', 'high': 1.955, 'low': 1.94, 'OPEN': 1.95, 'close': 1.94, 'volume': 12820, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 5), 'barType': 'barType'}, {'id': 63583, 'symbol': 'OAS', 'high': 1.945, 'low': 1.9, 'OPEN': 1.945, 'close': 1.91, 'volume': 22544, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 6), 'barType': 'barType'}, {'id': 63610, 'symbol': 'OAS', 'high': 1.945, 'low': 1.94, 'OPEN': 1.945, 'close': 1.94, 'volume': 800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 5), 'barType': 'barType'}, {'id': 63511, 'symbol': 'OGEN', 'high': 0.61, 'low': 0.61, 'OPEN': 0.61, 'close': 0.61, 'volume': 1000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 9), 'barType': 'barType'}, {'id': 63538, 'symbol': 'OGEN', 'high': 0.61, 'low': 0.61, 'OPEN': 0.61, 'close': 0.61, 'volume': 1000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 11), 'barType': 'barType'}, {'id': 63565, 'symbol': 'OGEN', 'high': 0.61, 'low': 0.61, 'OPEN': 0.61, 'close': 0.61, 'volume': 1000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 9), 'barType': 'barType'}, {'id': 63592, 'symbol': 'OGEN', 'high': 0.61, 'low': 0.61, 'OPEN': 0.61, 'close': 0.61, 'volume': 1000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 9), 'barType': 'barType'}, {'id': 63619, 'symbol': 'OGEN', 'high': 0.61, 'low': 0.61, 'OPEN': 0.61, 'close': 0.61, 'volume': 1000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 9), 'barType': 'barType'}, {'id': 63514, 'symbol': 'ROSE', 'high': 0.85, 'low': 0.85, 'OPEN': 0.85, 'close': 0.85, 'volume': 600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 10), 'barType': 'barType'}, {'id': 63541, 'symbol': 'ROSE', 'high': 0.85, 'low': 0.85, 'OPEN': 0.85, 'close': 0.85, 'volume': 600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 13), 'barType': 'barType'}, {'id': 63568, 'symbol': 'ROSE', 'high': 0.85, 'low': 0.85, 'OPEN': 0.85, 'close': 0.85, 'volume': 600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 11), 'barType': 'barType'}, {'id': 63595, 'symbol': 'ROSE', 'high': 0.85, 'low': 0.85, 'OPEN': 0.85, 'close': 0.85, 'volume': 600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 10), 'barType': 'barType'}, {'id': 63622, 'symbol': 'ROSE', 'high': 0.85, 'low': 0.85, 'OPEN': 0.85, 'close': 0.85, 'volume': 600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 10), 'barType': 'barType'}, {'id': 63500, 'symbol': 'SHIP', 'high': 0.2079, 'low': 0.2074, 'OPEN': 0.2079, 'close': 0.2074, 'volume': 2400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 5), 'barType': 'barType'}, {'id': 63527, 'symbol': 'SHIP', 'high': 0.2044, 'low': 0.1985, 'OPEN': 0.204, 'close': 0.1985, 'volume': 355752, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 7), 'barType': 'barType'}, {'id': 63554, 'symbol': 'SHIP', 'high': 0.2044, 'low': 0.1985, 'OPEN': 0.204, 'close': 0.1985, 'volume': 355752, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 4), 'barType': 'barType'}, {'id': 63581, 'symbol': 'SHIP', 'high': 0.1988, 'low': 0.1887, 'OPEN': 0.198, 'close': 0.1902, 'volume': 321544, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 5), 'barType': 'barType'}, {'id': 63608, 'symbol': 'SHIP', 'high': 0.1949, 'low': 0.1902, 'OPEN': 0.1902, 'close': 0.1946, 'volume': 27800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 5), 'barType': 'barType'}, {'id': 63512, 'symbol': 'SINT', 'high': 0.8002, 'low': 0.8002, 'OPEN': 0.8002, 'close': 0.8002, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 9), 'barType': 'barType'}, {'id': 63539, 'symbol': 'SINT', 'high': 0.8002, 'low': 0.8002, 'OPEN': 0.8002, 'close': 0.8002, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 11), 'barType': 'barType'}, {'id': 63566, 'symbol': 'SINT', 'high': 0.8002, 'low': 0.8002, 'OPEN': 0.8002, 'close': 0.8002, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 9), 'barType': 'barType'}, {'id': 63593, 'symbol': 'SINT', 'high': 0.8002, 'low': 0.8002, 'OPEN': 0.8002, 'close': 0.8002, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 9), 'barType': 'barType'}, {'id': 63620, 'symbol': 'SINT', 'high': 0.8002, 'low': 0.8002, 'OPEN': 0.8002, 'close': 0.8002, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 9), 'barType': 'barType'}, {'id': 63504, 'symbol': 'SOLO', 'high': 1.695, 'low': 1.695, 'OPEN': 1.695, 'close': 1.695, 'volume': 1104, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 6), 'barType': 'barType'}, {'id': 63531, 'symbol': 'SOLO', 'high': 1.695, 'low': 1.695, 'OPEN': 1.695, 'close': 1.695, 'volume': 1104, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 9), 'barType': 'barType'}, {'id': 63558, 'symbol': 'SOLO', 'high': 1.695, 'low': 1.695, 'OPEN': 1.695, 'close': 1.695, 'volume': 1104, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 5), 'barType': 'barType'}, {'id': 63585, 'symbol': 'SOLO', 'high': 1.695, 'low': 1.695, 'OPEN': 1.695, 'close': 1.695, 'volume': 1104, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 6), 'barType': 'barType'}, {'id': 63612, 'symbol': 'SOLO', 'high': 1.695, 'low': 1.695, 'OPEN': 1.695, 'close': 1.695, 'volume': 1104, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 6), 'barType': 'barType'}, {'id': 63491, 'symbol': 'TOPS', 'high': 0.2212, 'low': 0.2212, 'OPEN': 0.2212, 'close': 0.2212, 'volume': 388, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 40, 16), 'barType': 'barType'}, {'id': 63518, 'symbol': 'TOPS', 'high': 0.2215, 'low': 0.2214, 'OPEN': 0.2214, 'close': 0.2214, 'volume': 3800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 12), 'barType': 'barType'}, {'id': 63545, 'symbol': 'TOPS', 'high': 0.2222, 'low': 0.2213, 'OPEN': 0.2222, 'close': 0.2213, 'volume': 30200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 15), 'barType': 'barType'}, {'id': 63572, 'symbol': 'TOPS', 'high': 0.2213, 'low': 0.2213, 'OPEN': 0.2213, 'close': 0.2213, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 12), 'barType': 'barType'}, {'id': 63599, 'symbol': 'TOPS', 'high': 0.2201, 'low': 0.2116, 'OPEN': 0.2201, 'close': 0.2116, 'volume': 19800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 12), 'barType': 'barType'}, {'id': 63626, 'symbol': 'TOPS', 'high': 0.2149, 'low': 0.2116, 'OPEN': 0.2116, 'close': 0.2133, 'volume': 14398, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 11), 'barType': 'barType'}, {'id': 63517, 'symbol': 'USA', 'high': 6.0, 'low': 6.0, 'OPEN': 6.0, 'close': 6.0, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 11), 'barType': 'barType'}, {'id': 63544, 'symbol': 'USA', 'high': 6.0, 'low': 6.0, 'OPEN': 6.0, 'close': 6.0, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 14), 'barType': 'barType'}, {'id': 63571, 'symbol': 'USA', 'high': 6.0, 'low': 6.0, 'OPEN': 6.0, 'close': 6.0, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 12), 'barType': 'barType'}, {'id': 63598, 'symbol': 'USA', 'high': 6.0, 'low': 6.0, 'OPEN': 6.0, 'close': 6.0, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 11), 'barType': 'barType'}, {'id': 63625, 'symbol': 'USA', 'high': 6.0, 'low': 6.0, 'OPEN': 6.0, 'close': 6.0, 'volume': 200, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 11), 'barType': 'barType'}, {'id': 63506, 'symbol': 'VAL', 'high': 2.04, 'low': 1.98, 'OPEN': 2.0, 'close': 2.025, 'volume': 9055, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 6), 'barType': 'barType'}, {'id': 63533, 'symbol': 'VAL', 'high': 2.09, 'low': 2.02, 'OPEN': 2.02, 'close': 2.09, 'volume': 3900, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 9), 'barType': 'barType'}, {'id': 63560, 'symbol': 'VAL', 'high': 2.08, 'low': 2.07, 'OPEN': 2.08, 'close': 2.08, 'volume': 3630, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 6), 'barType': 'barType'}, {'id': 63587, 'symbol': 'VAL', 'high': 2.09, 'low': 2.09, 'OPEN': 2.09, 'close': 2.09, 'volume': 2550, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 7), 'barType': 'barType'}, {'id': 63614, 'symbol': 'VAL', 'high': 2.11, 'low': 2.1, 'OPEN': 2.1, 'close': 2.11, 'volume': 400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 6), 'barType': 'barType'}, {'id': 63501, 'symbol': 'VISL', 'high': 1.01, 'low': 1.0, 'OPEN': 1.01, 'close': 1.0, 'volume': 10000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 5), 'barType': 'barType'}, {'id': 63528, 'symbol': 'VISL', 'high': 1.005, 'low': 1.005, 'OPEN': 1.005, 'close': 1.005, 'volume': 7800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 7), 'barType': 'barType'}, {'id': 63555, 'symbol': 'VISL', 'high': 1.005, 'low': 1.005, 'OPEN': 1.005, 'close': 1.005, 'volume': 7800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 5), 'barType': 'barType'}, {'id': 63582, 'symbol': 'VISL', 'high': 1.005, 'low': 1.005, 'OPEN': 1.005, 'close': 1.005, 'volume': 7800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 5), 'barType': 'barType'}, {'id': 63609, 'symbol': 'VISL', 'high': 1.005, 'low': 1.005, 'OPEN': 1.005, 'close': 1.005, 'volume': 7800, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 5), 'barType': 'barType'}, {'id': 63515, 'symbol': 'WLL', 'high': 2.8, 'low': 2.78, 'OPEN': 2.8, 'close': 2.79, 'volume': 619, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 10), 'barType': 'barType'}, {'id': 63542, 'symbol': 'WLL', 'high': 2.795, 'low': 2.74, 'OPEN': 2.79, 'close': 2.74, 'volume': 2000, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 13), 'barType': 'barType'}, {'id': 63569, 'symbol': 'WLL', 'high': 2.73, 'low': 2.67, 'OPEN': 2.73, 'close': 2.67, 'volume': 32049, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 11), 'barType': 'barType'}, {'id': 63596, 'symbol': 'WLL', 'high': 2.715, 'low': 2.68, 'OPEN': 2.68, 'close': 2.69, 'volume': 2700, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 10), 'barType': 'barType'}, {'id': 63623, 'symbol': 'WLL', 'high': 2.73, 'low': 2.69, 'OPEN': 2.69, 'close': 2.72, 'volume': 4960, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 10), 'barType': 'barType'}, {'id': 63498, 'symbol': 'XSPA', 'high': 2.14, 'low': 2.14, 'OPEN': 2.14, 'close': 2.14, 'volume': 400, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 41, 4), 'barType': 'barType'}, {'id': 63525, 'symbol': 'XSPA', 'high': 2.14, 'low': 2.14, 'OPEN': 2.14, 'close': 2.14, 'volume': 1600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 42, 6), 'barType': 'barType'}, {'id': 63552, 'symbol': 'XSPA', 'high': 2.14, 'low': 2.14, 'OPEN': 2.14, 'close': 2.14, 'volume': 1600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 43, 4), 'barType': 'barType'}, {'id': 63579, 'symbol': 'XSPA', 'high': 2.14, 'low': 2.14, 'OPEN': 2.14, 'close': 2.14, 'volume': 1600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 44, 4), 'barType': 'barType'}, {'id': 63606, 'symbol': 'XSPA', 'high': 2.14, 'low': 2.14, 'OPEN': 2.14, 'close': 2.14, 'volume': 1600, 'shareCount': 1, 'timestamp': datetime.datetime(2020, 6, 8, 13, 45, 4), 'barType': 'barType'}]
        print(workingSet[0])
        x = 1
        x += workingSet[0]['close']

        print(x)
        sma = strategy.simpleMovingAverageAcrossTime(workingSet)

        for x in workingSet[0:4]:
            strategy.hammerTimeTrading(sma, x['symbol'], workingSet)
            if strategy.hammerTimeTrading(sma, x['symbol'], workingSet):
                connector.insertTrade(x['symbol'], x['high'], x['low'], x['OPEN'], x['close'], x['volume'], 0, x['barType'], 'hammerTrade', connection)


